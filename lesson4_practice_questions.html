<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Security+ Lesson 4 – Interactive PBQ (Multiple Choice)</title>
<style>
  :root{
    --ink:#1b1f2f; --muted:#4e566c; --accent:#2463eb; --line:#e2e6ef; --ok:#0b6b2f; --bad:#a5282c; --bg:#ffffff; --hint:#0b6b2f22; --warn:#a5282c22;
  }
  *{box-sizing:border-box}
  body{margin:0; font:16px/1.55 "Segoe UI", Roboto, system-ui, -apple-system, Arial, sans-serif; color:var(--ink); background:var(--bg);}
  header{padding:24px 20px 10px; border-bottom:1px solid var(--line);}
  h1{margin:.2rem 0; font-size:1.4rem;}
  .sub{color:var(--muted);}  
  .meta-grid{display:flex; gap:10px; flex-wrap:wrap; margin-top:.5rem;}
  .pill{border:1px solid var(--line); border-radius:999px; padding:.2rem .6rem; color:var(--muted);}  
  main{max-width:1000px; margin:0 auto; padding:18px 20px 40px;}
  h2{font-size:1.1rem; color:var(--accent); margin:.3rem 0 .7rem;}
  .card{border:1px solid var(--line); border-radius:12px; padding:16px; margin:16px 0; background:#fff;}
  .controls{display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 0;}
  button{appearance:none; border:1px solid var(--line); background:#fff; padding:.55rem .9rem; border-radius:10px; cursor:pointer; font-weight:600}
  button:hover{border-color:var(--accent)}
  button.primary{background:var(--accent); color:#fff; border-color:var(--accent)}
  button.ghost{background:transparent}

  .q{margin:1rem 0; border:1px solid var(--line); border-radius:12px; padding:14px}
  .q-header{display:flex; align-items:flex-start; justify-content:space-between; gap:8px}
  .q-title{font-weight:600}
  .q-body{margin-top:.5rem}
  .opts{display:grid; gap:.4rem; margin:.6rem 0 0}
  .opt{display:flex; gap:.6rem; align-items:flex-start; padding:.45rem .55rem; border-radius:10px; border:1px solid transparent}
  .opt input{margin-top:.25rem}
  .opt label{display:block; cursor:pointer}
  .q.correct{border-color:var(--ok); background:var(--hint)}
  .q.incorrect{border-color:var(--bad); background:var(--warn)}
  .explain{margin-top:.6rem; font-size:.95rem; color:var(--muted)}
  .akey{color:var(--ok); font-weight:700}
  .scorebar{display:flex; align-items:center; gap:10px;}
  progress{width:240px; height:14px}
  .sr-only{position:absolute; left:-10000px; width:1px; height:1px; overflow:hidden}

  details > summary{cursor:pointer; color:var(--accent); font-weight:600}
  details .akey{display:inline-block; margin-left:.25rem}

  @media print{
    header{border:none}
    button, .controls{display:none !important}
    .q{page-break-inside:avoid}
  }
</style>
</head>
<body>
<header>
  <div class="sub">CompTIA Security+ • Lesson 4</div>
  <h1>Practice / Study Questions (Interactive PBQ)</h1>
  <div class="meta-grid">
    <div class="pill">Topic: Identity and Access Management</div>
    <div class="pill" id="qcount">15 Questions</div>
    <div class="pill">Printable</div>
  </div>
</header>

<main>
  <section class="card">
    <h2>Instructions</h2>
    <p>Answer each question, then choose <strong>Check</strong> to see immediate feedback and an explanation. Use <strong>Check All</strong> to grade everything at once, <strong>Shuffle</strong> to change the order, and <strong>Reset</strong> to clear your selections. Designed from Lesson 4 (IAM): SSO &amp; federation, access control models, MFA, AAA protocols, and lifecycle controls.</p>
    <div class="controls">
      <button class="primary" id="btnCheckAll" type="button" aria-label="Check all questions">Check All</button>
      <button id="btnReset" type="button">Reset</button>
      <button id="btnShuffle" type="button" class="ghost">Shuffle</button>
    </div>
  </section>

  <section id="qs" class="card" aria-live="polite">
    <h2>Questions</h2>
    <div id="qWrap"></div>
  </section>

  <section class="card" id="results" hidden>
    <h2>Results</h2>
    <div class="scorebar">
      <div id="scoreText" aria-live="polite">0 / 15 correct</div>
      <progress id="scoreProg" max="15" value="0" aria-hidden="true"></progress>
    </div>
  </section>

  <section class="card">
    <details>
      <summary>Show answer key</summary>
      <ol id="answerKey"></ol>
    </details>
  </section>
</main>

<script>
// --- Data model -------------------------------------------------------------
const BANK = [
  {
    q: "Which access control model assigns permissions to job roles instead of individual users?",
    options: [
      "Discretionary Access Control (DAC)",
      "Role-Based Access Control (RBAC)",
      "Mandatory Access Control (MAC)",
      "Rule-Based Access Control"
    ],
    a: 1,
    why: "RBAC ties permissions to roles so users inherit access by job function (least privilege via roles)."
  },
  {
    q: "In a federated sign-in between Azure AD and Salesforce, Azure AD acts as the:",
    options: ["Service Provider", "RADIUS Server", "Identity Provider", "Authorization Server within Salesforce"],
    a: 2,
    why: "In federation, the IdP authenticates the principal and issues the claim/assertion that the SP trusts. Azure AD is the IdP; Salesforce is the SP."
  },
  {
    q: "Which protocol enables secure single sign-on between an identity provider and a service provider for web applications?",
    options: ["OAuth 2.0", "SAML", "RADIUS", "Kerberos"],
    a: 1,
    why: "SAML provides XML-based assertions used for web SSO between IdP and SP."
  },
  {
    q: "Which statement accurately describes OAuth 2.0?",
    options: [
      "A protocol used primarily for authentication",
      "An authorization framework that allows resource access without sharing credentials",
      "A replacement for SAML in enterprise SSO",
      "A network protocol for device management"
    ],
    a: 1,
    why: "OAuth 2.0 is an authorization framework; it grants scoped access tokens to clients without revealing the user's password."
  },
  {
    q: "Which option best defines OpenID Connect?",
    options: [
      "A stand-alone replacement for OAuth 2.0",
      "An identity layer built on top of OAuth 2.0 to add authentication",
      "A version of Kerberos used in Azure AD",
      "A certificate enrollment mechanism"
    ],
    a: 1,
    why: "OIDC adds an authentication identity layer over OAuth 2.0 using ID tokens (often JWT)."
  },
  {
    q: "Which step in the SAML authentication flow occurs first when a user attempts to access Salesforce through Azure AD SSO?",
    options: [
      "The Service Provider redirects the user to the Identity Provider",
      "The Identity Provider validates credentials and issues a signed assertion",
      "The Service Provider validates the assertion and grants access",
      "The user initiates access to the Service Provider application"
    ],
    a: 3,
    why: "The flow starts when the user (principal) attempts to access the SP application, which then triggers the redirect to the IdP."
  },
  {
    q: "Which Azure AD control helps enforce sign-in requirements based on location, device compliance, or risk level?",
    options: ["Password Complexity Policy", "Conditional Access Policy", "Account Lockout Threshold", "Session Timeout Setting"],
    a: 1,
    why: "Conditional Access evaluates user, device, location, and risk attributes to allow/deny or require MFA."
  },
  {
    q: "Which combination represents true multifactor authentication (MFA)?",
    options: [
      "Password and Username",
      "Password and Security Question",
      "Smart Card and Authenticator App Code",
      "PIN and Password"
    ],
    a: 2,
    why: "Smart card (possession) + TOTP/app code (possession/knowledge) are separate factors; pairs like password+PIN are same factor (knowledge)."
  },
  {
    q: "Which protocol provides centralized authentication and command authorization for managing network devices?",
    options: ["Kerberos", "RADIUS", "TACACS+", "LDAP"],
    a: 2,
    why: "TACACS+ centralizes device admin authentication and per-command authorization; RADIUS targets network access AAA."
  },
  {
    q: "Which access control model evaluates multiple user and environmental attributes to make decisions dynamically?",
    options: ["Role-Based Access Control (RBAC)", "Attribute-Based Access Control (ABAC)", "Discretionary Access Control (DAC)", "Mandatory Access Control (MAC)"],
    a: 1,
    why: "ABAC evaluates subject, object, and environment attributes (e.g., user role, device state, location, time)."
  },
  {
    q: "Which principle states that users should be granted only the minimum permissions required to perform their job duties?",
    options: ["Separation of Duties", "Least Privilege", "Defense in Depth", "Zero Trust"],
    a: 1,
    why: "Least privilege minimizes the blast radius by granting only what's necessary for tasks."
  },
  {
    q: "In which access control model can resource owners determine who can access their objects?",
    options: ["Discretionary Access Control (DAC)", "Mandatory Access Control (MAC)", "Role-Based Access Control (RBAC)", "Attribute-Based Access Control (ABAC)"],
    a: 0,
    why: "DAC lets object owners set ACLs for their resources."
  },
  {
    q: "Which method provides the strongest, most phishing-resistant second factor for administrator accounts?",
    options: ["SMS One-Time Code", "Email Approval Link", "Authenticator App Code (TOTP)", "FIDO2 Hardware Security Key"],
    a: 3,
    why: "FIDO2/WebAuthn hardware keys provide phishing-resistant, asymmetric, passwordless or 2FA authentication."
  },
  {
    q: "During an access review, some users still have rights to an app after changing departments. Which control corrects this?",
    options: ["Emergency Break-Glass Accounts", "Role Recertification and Access Reviews", "Shared Administrative Accounts", "Extended Password Expiration Policy"],
    a: 1,
    why: "Periodic role/access recertification removes stale entitlements when roles change (re-provisioning/deprovisioning)."
  },
  {
    q: "Which step should occur immediately after an employee leaves the company to maintain security?",
    options: ["Archive the user’s mailbox", "Disable or delete the account and revoke access tokens", "Wait 30 days before removing the user", "Reset the password and keep the account active"],
    a: 1,
    why: "Immediate deprovisioning—disable/delete accounts, revoke tokens/keys—prevents lingering access."
  }
];

// --- State -----------------------------------------------------------------
let QUESTIONS = [];
const qWrap = document.getElementById('qWrap');
const results = document.getElementById('results');
const scoreText = document.getElementById('scoreText');
const scoreProg = document.getElementById('scoreProg');
const answerKey = document.getElementById('answerKey');
const qcount = document.getElementById('qcount');

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]] = [arr[j],arr[i]];
  }
  return arr;
}

function reset(){
  QUESTIONS = BANK.map((q, idx) => ({...q, id: idx+1}));
  render();
  results.hidden = true;
  scoreProg.max = QUESTIONS.length;
  qcount.textContent = `${QUESTIONS.length} Questions`;
}

function render(){
  qWrap.innerHTML = '';
  answerKey.innerHTML = '';
  QUESTIONS.forEach((q, qi) => {
    // Card
    const card = document.createElement('article');
    card.className = 'q';
    card.id = `q${qi+1}`;

    // Header
    const head = document.createElement('div');
    head.className = 'q-header';
    head.innerHTML = `<div class="q-title">${qi+1}. ${q.q}</div>`;

    // Body
    const body = document.createElement('div');
    body.className = 'q-body';

    // Options
    const opts = document.createElement('div');
    opts.className = 'opts';

    q.options.forEach((txt, oi) => {
      const id = `q${qi}_opt${oi}`;
      const row = document.createElement('div');
      row.className = 'opt';

      const input = document.createElement('input');
      input.type = 'radio';
      input.name = `q${qi}`;
      input.id = id;
      input.value = oi;

      const label = document.createElement('label');
      label.setAttribute('for', id);
      label.innerHTML = `<strong>${String.fromCharCode(65+oi)}.</strong> ${txt}`;

      row.appendChild(input); row.appendChild(label);
      opts.appendChild(row);
    });

    // Buttons & feedback
    const ctrls = document.createElement('div');
    ctrls.className = 'controls';
    const btnCheck = document.createElement('button');
    btnCheck.textContent = 'Check';
    btnCheck.type = 'button';
    btnCheck.addEventListener('click', () => gradeOne(qi));

    const btnClear = document.createElement('button');
    btnClear.textContent = 'Clear';
    btnClear.type = 'button';
    btnClear.className = 'ghost';
    btnClear.addEventListener('click', () => clearOne(qi));

    const fb = document.createElement('div');
    fb.className = 'explain';
    fb.id = `fb${qi}`;

    ctrls.appendChild(btnCheck); ctrls.appendChild(btnClear);

    body.appendChild(opts);
    body.appendChild(ctrls);
    body.appendChild(fb);

    card.appendChild(head);
    card.appendChild(body);
    qWrap.appendChild(card);

    // Answer key line
    const li = document.createElement('li');
    li.innerHTML = `<span class="akey">${String.fromCharCode(65+q.a)}</span> – ${q.options[q.a]}`;
    answerKey.appendChild(li);
  });
}

function getChoice(qi){
  const sel = document.querySelector(`input[name="q${qi}"]:checked`);
  return sel ? parseInt(sel.value,10) : null;
}

function gradeOne(qi){
  const q = QUESTIONS[qi];
  const choice = getChoice(qi);
  const card = document.getElementById(`q${qi+1}`);
  const fb = document.getElementById(`fb${qi}`);
  card.classList.remove('correct','incorrect');

  if(choice === null){
    fb.innerHTML = '<em>Please select an option.</em>';
    return;
  }
  const isCorrect = choice === q.a;
  card.classList.add(isCorrect ? 'correct' : 'incorrect');
  const your = String.fromCharCode(65+choice);
  const key = String.fromCharCode(65+q.a);
  fb.innerHTML = `${isCorrect ? '✅ Correct' : '❌ Incorrect'} — Your answer: <strong>${your}</strong>. Correct answer: <strong class="akey">${key}</strong>.
    <br>${q.why}`;
  updateScore();
}

function clearOne(qi){
  const card = document.getElementById(`q${qi+1}`);
  const fb = document.getElementById(`fb${qi}`);
  card.classList.remove('correct','incorrect');
  fb.textContent='';
  const radios = document.querySelectorAll(`input[name="q${qi}"]`);
  radios.forEach(r=> r.checked=false);
  updateScore();
}

function updateScore(){
  let correct = 0, answered = 0;
  QUESTIONS.forEach((q, qi)=>{
    const sel = getChoice(qi);
    if(sel !== null){
      answered++;
      if(sel === q.a) correct++;
    }
  });
  scoreText.textContent = `${correct} / ${QUESTIONS.length} correct`;
  scoreProg.value = correct; 
  results.hidden = false;
}

function gradeAll(){
  QUESTIONS.forEach((_, qi) => gradeOne(qi));
}

// --- Wire up top controls ---------------------------------------------------

document.getElementById('btnCheckAll').addEventListener('click', gradeAll);

document.getElementById('btnReset').addEventListener('click', ()=>{
  reset();
});

document.getElementById('btnShuffle').addEventListener('click', ()=>{
  QUESTIONS = shuffle(QUESTIONS);
  render();
});

// Init
reset();
</script>
</body>
</html>
